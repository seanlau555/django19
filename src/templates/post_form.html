{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block theme %}
{{ form.media }}
	<link rel="stylesheet" href='{% static "css/quill.core.min.css" %}'>
	<link rel="stylesheet" href='{% static "css/editor.css" %}'>
{% endblock %}

{% block head_extra %}
{{ form.media }}
{% endblock head_extra %}

{% block content %}
	<div class="row">
		<div class="col-sm-8 col-sm-offset-2">
			<div class="col-sm-10">
				<table id='input'>
					<tr>
						<td colspan="2"><h2>Title: </h2></td>
					</tr>
{% if instance %}
					<tr>
						<td colspan="2">
							<input class="form-control" type="text" id="title" value="{{ instance.title }}">
							<br>
							<p id='titleErr' class='err'>Title is required</p>
						</td>
					</tr>
					<tr>
						<td><h3>Publish Date: </h3></td>
						<td id="date">
							Now? <input type="checkbox" id="now"> &nbsp&nbsp
							<span id='future'>
								<input type="date" id="publish" value="{{ instance.publish|date:'Y-m-d' }}">
							</span>
							<br>
						</td>
					</tr>
					<tr>
						<td colspan="2"><p id='pubErr' class='err'>Publish date is in the past or have not entered</p></td>
					</tr>
					<tr>
						<td><h3>Private: </h3></td>
						<td>
							<input type="checkbox" id="private">
							<br>
						</td>
					</tr>
					<tr>
						<td><h3>Feature Image: </h3></td>
						<td>
							<input type="file" name="image" id="image" class="clearablefileinput">
							<br>
						</td>
					</tr>
					<tr>
						<td colspan="2"><p id='featureErr' class='err'>Feature image is required</p></td>
					</tr>
{% else %}
					<tr>
						<td colspan="2">
							<input class="form-control" type="text" id="title">
							<br>
							<p id='titleErr' class='err'>Title is required</p>
						</td>
					</tr>
					<tr>
						<td><h3>Publish Date: </h3></td>
						<td>
							Now? <input type="checkbox" id="now" checked> &nbsp&nbsp
							<span id='future' style="visibility: hidden;">
								<input type="date" id="publish">
							</span>
							<br>
						</td>
					</tr>
					<tr>
						<td><p id='pubErr' class='err'>Publish date is in the past or have not entered</p></td>
					</tr>
					<tr>
						<td><h3>Private: </h3></td>
						<td>
							<input type="checkbox" id="private">
							<br>
						</td>
					</tr>
					<tr>
						<td><h3>Feature Image: </h3></td>
						<td>
							<input type="file" name="image" id="image" class="clearablefileinput">
							<br>
						</td>
					</tr>
					<tr>
						<td><p id='featureErr' class='err'>Feature image is required</p></td>
					</tr>
{% endif %}
					<tr>
						<td colspan="2">
							<div class='featureImg'>
{% if instance.image %}
								<img src='{{ instance.image }}' alt='featureImg' width='100%'>
{% endif %}
							</div>
						</td>
					</tr>
					<tr>
						<td><button class="btn btn-primary" id='submit'>Submit</button></td>
						<td><input type="checkbox" id="testbox"><button class="btn btn-primary" id='test'>Test</button></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<hr>
	<div class="row">
		<div id="sidebar-controls" class='col-sm-8 col-sm-offset-2' style='visibility: hidden'>
	<!-- 		<button id="show-controls">show control</i></button> -->
			<span class="controls">
				<button id="divider-button" class="btn btn-primary">Divider</button>
				<button id="image-button" class="btn btn-primary">Image</button>
				<button id="video-button" class="btn btn-primary">Video</button>
			</span>
		</div>

		<div class='col-xs-12 col-sm-8 col-sm-offset-2'>
			<p id='contentErr' class='err'>Content is empty</p>
			<article id="editor-container" ></article>
		</div>
	</div>

  <!-- Modal -->
	<div class="modal fade" role="dialog">
		<div class="modal-dialog">

		<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
				</div>
				<div class="modal-body">
				</div>
				<div class="modal-footer">
				</div>
			</div>
		</div>

		</div>
	</div>

{% if instance %}
	<script>
		var content = {{ instance.content|safe }};
		var pid = "{{ instance.id }}";
		var imgUpdate = 1;
	</script>
{% if instance.draft %}
	<script>
		var draft = true;
	</script>
{% else %}
	<script>
		var draft = false;
	</script>
{% endif %}
	<script src='{% static "js/post_form.js" %}'></script>
	<script src='{% static "js/post_update.js" %}'></script>
{% else %}
	<script>
		var imgUpdate = 0;
	</script>
	<script src='{% static "js/post_form.js" %}'></script>
	<script src='{% static "js/post_create.js" %}'></script>
{% endif %}

{% endblock %}